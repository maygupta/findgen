<table id="bookings" class="table hover table-bordered hover" cellspacing="0" width="100%">
    <thead>
        <tr>
            <th>Id</th>
            <th>Name</th>
            <th>Office Location</th>
            <th>From Date</th>
            <th>Till Date</th>
            <th>Time In</th>
            <th>Time Out</th>
            <th>Generator Type</th>
            <th>KVA</th>
            <th>LISP</th>
            <th>Status</th>
            <th>Client</th>
            <th>Vendor Id</th>
            <th>Duty Slip</th>
            <% if current_user.is_approver? %>
            <th>Actions</th>
            <% end %>
        </tr>
    </thead>
        <% @bookings.each do |booking| %>
          <tr>
            <td><%= booking.id %></td>
            <td><%= booking.name %></td>
            <td><%= booking.location %></td>
            <td><%= booking.start_date %></td>
            <td><%= booking.end_date %></td>
            <td><%= booking.time_in %></td>
            <td><%= booking.time_out %></td>
            <td><%= booking.gen_type %></td>
            <td><%= booking.kva %></td>
            <td><%= booking.lisp %></td>
            <td><%= booking.status %></td>
            <td><%= booking.client.name %></td>
            <td>
            <% if booking.vendor.present? %>
                <%= booking.vendor.name %>
            <% end %>
            </td>
            <td>
            <% if booking.slip.present? %>
                <%= link_to "Download", booking.slip_url %>
            <% else %>
                No Duty Slip
            <% end %>
            </td>

            <% if current_user.is_approver? and booking.status == "pending" %>
            <td><button class="approve_btn">Approve</button></td>
            <% end %>
          </tr>
        <% end %>

    <tbody>
    </tbody>
</table>

<script type="text/javascript">
    $('#bookings tbody').on('click','tr', function(event) {
        id = $(this).find('td').first().text()
        location = '/bookings/' + id;
    });
</script>